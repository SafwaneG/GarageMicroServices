{"ast":null,"code":"import{useState,useEffect}from\"react\";import endpoints from\"../../config/endpoints.json\";import useAxios from\"../../hooks/axios\";export default function useClient(){const columns=[{field:\"firstName\",headerName:\"First Name\"},{field:\"lastName\",headerName:\"Last Name\"},{field:\"phoneNumber\",headerName:\"Phone Number\"},{field:\"email\",headerName:\"Email\"},{field:\"address\",headerName:\"Address\",nested:{fields:[\"street\",\"city\",\"country\",\"buildingNumber\"]}}];const{customAxios}=useAxios();const[open,setOpen]=useState(false);const[openNotif,setOpenNotif]=useState(false);const[errors,setErrors]=useState({});const[isUpdating,setIsUpdating]=useState(false);const[updated,setUpdated]=useState(false);const[formData,setFormData]=useState({identityNumber:\"\",firstName:\"\",lastName:\"\",phoneNumber:\"\",email:\"\",address:{country:\"\",city:\"\",street:\"\",buildingNumber:\"\"}});const[clients,setClients]=useState([]);const[loading,setLoading]=useState(false);const[fetchError,setFetchError]=useState(null);const handleOpen=()=>{setUpdated(false);setOpen(true);};const handleClose=()=>{setFormData({identityNumber:\"\",firstName:\"\",lastName:\"\",phoneNumber:\"\",email:\"\",address:{country:\"\",city:\"\",street:\"\",buildingNumber:\"\"}});setIsUpdating(false);setOpen(false);};const handleOpenNotif=()=>setOpenNotif(true);const handleCloseNotif=()=>setOpenNotif(false);const onChange=e=>{const{name,value}=e.target;if(name.includes(\"address.\")){const addressField=name.split(\".\")[1];setFormData(prevData=>({...prevData,address:{...prevData.address,[addressField]:value}}));}else{setFormData(prevData=>({...prevData,[name]:value}));}if(errors[name]){setErrors(prevErrors=>({...prevErrors,[name]:undefined}));}};const addClient=async()=>{try{const result=await customAxios({method:\"POST\",url:endpoints.addNewClient,data:formData});console.log(\"Client added successfully:\",result.data);handleClose();handleOpenNotif();fetchClients();}catch(error){console.error(\"Error adding client:\",error.response||error.message);}};const openUpdate=row=>{handleOpen();setFormData(row);setIsUpdating(true);};const updateClient=async()=>{try{const result=await customAxios({method:\"PUT\",url:endpoints.addNewClient,data:formData});console.log(\"Client Updated successfully:\",result.data);handleClose();setUpdated(true);handleOpenNotif();fetchClients();}catch(error){console.error(\"Error adding client:\",error.response||error.message);}};const fetchClients=async()=>{setLoading(true);setFetchError(null);try{const response=await customAxios({method:\"GET\",url:endpoints.addNewClient});setClients(response.data);}catch(error){var _error$response,_error$response$data;console.error(\"Error fetching clients:\",error.response||error.message);setFetchError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message);}finally{setLoading(false);}};useEffect(()=>{fetchClients();},[]);return{onChange,handleOpen,handleClose,open,addClient,clients,loading,fetchError,columns,handleCloseNotif,handleOpenNotif,openNotif,openUpdate,formData,isUpdating,updateClient,updated};}","map":{"version":3,"names":["useState","useEffect","endpoints","useAxios","useClient","columns","field","headerName","nested","fields","customAxios","open","setOpen","openNotif","setOpenNotif","errors","setErrors","isUpdating","setIsUpdating","updated","setUpdated","formData","setFormData","identityNumber","firstName","lastName","phoneNumber","email","address","country","city","street","buildingNumber","clients","setClients","loading","setLoading","fetchError","setFetchError","handleOpen","handleClose","handleOpenNotif","handleCloseNotif","onChange","e","name","value","target","includes","addressField","split","prevData","prevErrors","undefined","addClient","result","method","url","addNewClient","data","console","log","fetchClients","error","response","message","openUpdate","row","updateClient","_error$response","_error$response$data"],"sources":["C:/Users/dell/Desktop/garage-front-end/src/pages/client/service.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport endpoints from \"../../config/endpoints.json\";\r\nimport useAxios from \"../../hooks/axios\";\r\nexport default function useClient() {\r\n  const columns = [\r\n    { field: \"firstName\", headerName: \"First Name\" },\r\n    { field: \"lastName\", headerName: \"Last Name\" },\r\n    { field: \"phoneNumber\", headerName: \"Phone Number\" },\r\n    { field: \"email\", headerName: \"Email\" },\r\n    {\r\n      field: \"address\",\r\n      headerName: \"Address\",\r\n      nested: { fields: [\"street\", \"city\", \"country\", \"buildingNumber\"] },\r\n    },\r\n  ];\r\n  const { customAxios } = useAxios();\r\n  const [open, setOpen] = useState(false);\r\n  const [openNotif, setOpenNotif] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n  const [isUpdating, setIsUpdating] = useState(false);\r\n  const [updated, setUpdated] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    identityNumber: \"\",\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    phoneNumber: \"\",\r\n    email: \"\",\r\n    address: {\r\n      country: \"\",\r\n      city: \"\",\r\n      street: \"\",\r\n      buildingNumber: \"\",\r\n    },\r\n  });\r\n  const [clients, setClients] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [fetchError, setFetchError] = useState(null);\r\n\r\n  const handleOpen = () => {\r\n    setUpdated(false);\r\n    setOpen(true);\r\n  };\r\n  const handleClose = () => {\r\n    setFormData({\r\n      identityNumber: \"\",\r\n      firstName: \"\",\r\n      lastName: \"\",\r\n      phoneNumber: \"\",\r\n      email: \"\",\r\n      address: {\r\n        country: \"\",\r\n        city: \"\",\r\n        street: \"\",\r\n        buildingNumber: \"\",\r\n      },\r\n    });\r\n    setIsUpdating(false);\r\n    setOpen(false);\r\n  };\r\n  const handleOpenNotif = () => setOpenNotif(true);\r\n  const handleCloseNotif = () => setOpenNotif(false);\r\n\r\n  const onChange = (e) => {\r\n    const { name, value } = e.target;\r\n\r\n    if (name.includes(\"address.\")) {\r\n      const addressField = name.split(\".\")[1];\r\n      setFormData((prevData) => ({\r\n        ...prevData,\r\n        address: {\r\n          ...prevData.address,\r\n          [addressField]: value,\r\n        },\r\n      }));\r\n    } else {\r\n      setFormData((prevData) => ({\r\n        ...prevData,\r\n        [name]: value,\r\n      }));\r\n    }\r\n\r\n    if (errors[name]) {\r\n      setErrors((prevErrors) => ({\r\n        ...prevErrors,\r\n        [name]: undefined,\r\n      }));\r\n    }\r\n  };\r\n\r\n  const addClient = async () => {\r\n    try {\r\n      const result = await customAxios({\r\n        method: \"POST\",\r\n        url: endpoints.addNewClient,\r\n        data: formData,\r\n      });\r\n      console.log(\"Client added successfully:\", result.data);\r\n      handleClose();\r\n      handleOpenNotif();\r\n      fetchClients();\r\n    } catch (error) {\r\n      console.error(\"Error adding client:\", error.response || error.message);\r\n    }\r\n  };\r\n  const openUpdate = (row) => {\r\n    handleOpen();\r\n    setFormData(row);\r\n    setIsUpdating(true);\r\n  };\r\n\r\n  const updateClient = async () => {\r\n    try {\r\n      const result = await customAxios({\r\n        method: \"PUT\",\r\n        url: endpoints.addNewClient,\r\n        data: formData,\r\n      });\r\n      console.log(\"Client Updated successfully:\", result.data);\r\n      handleClose();\r\n      setUpdated(true);\r\n      handleOpenNotif();\r\n      fetchClients();\r\n    } catch (error) {\r\n      console.error(\"Error adding client:\", error.response || error.message);\r\n    }\r\n  };\r\n\r\n  const fetchClients = async () => {\r\n    setLoading(true);\r\n    setFetchError(null);\r\n    try {\r\n      const response = await customAxios({\r\n        method: \"GET\",\r\n        url: endpoints.addNewClient,\r\n      });\r\n      setClients(response.data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching clients:\", error.response || error.message);\r\n      setFetchError(error.response?.data?.message || error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchClients();\r\n  }, []);\r\n\r\n  return {\r\n    onChange,\r\n    handleOpen,\r\n    handleClose,\r\n    open,\r\n    addClient,\r\n    clients,\r\n    loading,\r\n    fetchError,\r\n    columns,\r\n    handleCloseNotif,\r\n    handleOpenNotif,\r\n    openNotif,\r\n    openUpdate,\r\n    formData,\r\n    isUpdating,\r\n    updateClient,\r\n    updated,\r\n  };\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}